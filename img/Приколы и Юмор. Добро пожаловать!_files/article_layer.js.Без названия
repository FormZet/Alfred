!function(e){function t(n){if(o[n])return o[n].exports;var a=o[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){e.exports=o(5)},function(module,exports){"use strict";function ajx2q(e,t){var o=[],n=function(e){if(window._decodeEr&&_decodeEr[e])return e;try{return encodeURIComponent(e)}catch(t){return""}};for(var a in e)if(null!=e[a]&&!isFunction(e[a]))if(isArray(e[a]))for(var r=0,i=0,s=e[a].length;s>r;++r)null==e[a][r]||isFunction(e[a][r])||(o.push(n(a)+"["+i+"]="+n(e[a][r])),++i);else o.push(n(a)+"="+n(e[a]));return t||o.sort(),o.join("&")}function q2ajx(e){if(!e)return{};var t={},o=function(e){try{return decodeURIComponent(e)}catch(t){return window._decodeEr=window._decodeEr||{},_decodeEr[e]=1,e}};return e=e.split("&"),each(e,function(e,n){var a=n.split("=");if(a[0]){var r=o(a[1]+"");if("[]"==a[0].substr(a.length-2)){var i=o(a[0].substr(0,a.length-2));t[i]||(t[i]=[]),t[i].push(r)}else t[o(a[0])]=r}}),t}function requestBox(e,t,o){return e.setOptions({onDestroy:o}),e.onDone=function(){t&&t.apply(null,arguments)},e}function activateMobileBox(e){return requestBox(showBox("activation.php",{act:"activate_mobile_box",hash:e.hash}),function(){vk.nophone=0,e.onDone()},e.onFail)}function validateMobileBox(e){return requestBox(showBox("activation.php",{act:"validate_box",captcha:e.acceptCaptcha?1:"",skip_push:e.skip_push?e.skip_push:"",from:e.from||"",hash:e.hash,ahash:e.ahash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}function validatePassBox(e){return requestBox(showBox("activation.php",{act:"pass_validate_box",hash:e.hash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}function photoCaptchaBox(e){return requestBox(showBox("pcaptcha.php",{act:"box"},{stat:["pcaptcha.css","pcaptcha.js"]}),e.onDone,e.onFail)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ajx2q=ajx2q,exports.q2ajx=q2ajx,exports.requestBox=requestBox,exports.activateMobileBox=activateMobileBox,exports.validateMobileBox=validateMobileBox,exports.validatePassBox=validatePassBox,exports.photoCaptchaBox=photoCaptchaBox,window.ajaxCache={},window.globalAjaxCache={},window.iframeTO=0;var ajax=exports.ajax={_init:function(){var e=!1;try{if(e=new XMLHttpRequest)return void(ajax._req=function(){return new XMLHttpRequest})}catch(t){}ajax._req||browser.search_bot||location.replace("/badbrowser.php")},_getreq:function(){return ajax._req||ajax._init(),ajax._req()},_frameover:function(e,t){if(window.iframeTransport){var o=iframeTransport.parentNode;o.innerHTML="",utilsNode.removeChild(o),iframeTransport=!1,(e||t)&&ajax.framegot(!1,!1,e,t),ajax.framegot(!1),cur.onFrameBlocksDone&&cur.onFrameBlocksDone(),ajax.tOver=(new Date).getTime()}},_receive:function _receive(cont,html,js,bench,params){var c=cont&&ge(cont);if(c&&html&&(c.firstChild?c.appendChild(cf(html)):val(c,html)),js){var scr="(function(){"+js+";})()";if(__debugMode)eval(scr);else try{eval(scr)}catch(e){topError(e,{dt:15,type:8,url:ajax._frameurl,js:js,answer:Array.prototype.slice.call(arguments).join("<!>")})}bench&&(ajax.tModule=cur.module)}params&&"leftads"in params&&window.__adsSet&&__adsSet(params.leftads,params.ads_section||"",params.ads_can_show,params.ads_showed),ajax._framenext()},framedata:!1,_framenext:function(){if((ajax.framedata||{}).length){var e=ajax.framedata.shift();e===!0?ajax._framenext():e===!1?(ajax.framedata=!1,cur.onFrameBlocksDone&&cur.onFrameBlocksDone()):iframeTO=lTimeout(ajax._receive.pbind(e[0],e[1],e[2],!0,e[3]),0)}},framegot:function(e,t,o,n){ajax.framedata&&(ajax.framedata.push(void 0===t&&void 0===o&&void 0===n?e:[e,t,o,n]),1==ajax.framedata.length&&ajax._framenext())},framepost:function(e,t,o,n){clearTimeout(iframeTO),window.iframeTransport&&ajax._frameover(),window.iframeTransport=utilsNode.appendChild(ce("div",{innerHTML:"<iframe></iframe>"})).firstChild,ajax._framedone=o,ajax.framedata=[!0],e+="?"+("string"!=typeof t?ajx2q(t,n&&n.noSort):t),e+=("?"!=e.charAt(e.length-1)?"&":"")+"_rndVer="+irand(0,99999),ajax._frameurl=iframeTransport.src=e},plainpost:function(e,t,o,n,a,r,i){var s=ajax._getreq(),l="string"!=typeof t?ajx2q(t,i&&i.noSort):t;s.onreadystatechange=function(){4==s.readyState&&(s.status>=200&&s.status<300?o&&o(s.responseText,s):n&&n(s.responseText,s))};try{s.open("POST",e,!0)}catch(c){return!1}return r&&each(r,function(e,t){s[e]=t}),a||(s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest")),s.send(l),s},post:function(e,t,o){"/"!=e.substr(0,1)&&"http"!=e.substr(0,4)&&(e="/"+e);var n=extend({_captcha:!1,_box:!1},o||{}),a=extend({al:n.frame?-1:1},t),r=vkNow(),i=vk.spentLastSendTS?Math.round((r-vk.spentLastSendTS)/1e3):0;if(vk.sampleUser>=0&&window.cur&&cur.module&&i>=1&&(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle&&(a=extend({_smt:cur.module+":"+i},a)),vk.spentLastSendTS=r),n.progress&&(n.showProgress||(n.showProgress=function(){var e=ge(n.progress);hasClass(e,"pr")&&setStyle(e,"opacity",1),show(e)}),n.hideProgress||(n.hideProgress=function(){var e=ge(n.progress);hasClass(e,"pr")&&setStyle(e,"opacity",0),hide(e)})),n.loader){var s=isVisible(boxLayerWrap);n.showProgress=function(){boxRefreshCoords(boxLoader),show(boxLoader),s||show(boxLayerWrap)},n.hideProgress=function(){hide(boxLoader),s||hide(boxLayerWrap)}}return ajax._post(e,a,n)},preload:function(e,t,o){"/"!=e.substr(0,1)&&(e="/"+e),ajaxCache[e+"#"+ajx2q(t)]=o},invalidate:function(e,t){void 0===e?ajaxCache={}:delete ajaxCache[ajax._getCacheKey(e,t)]},_getCacheKey:function(e,t,o){var n=clone(t);return delete n.al,delete n.al_ad,delete n.ads_section,delete n.ads_showed,delete n.captcha_sid,delete n.captcha_key,delete n._smt,delete n._preload,e+"#"+ajx2q(n,o&&o.noSort)},_debugLog:function(e,t){window.debuglogGot&&debuglogGot(t,e)},_parseRes:function(e,t){window._updateDebug=!1;for(var o=e.length-1;o>=0;--o){var n=e[o];if("<!"==n.substr(0,2)){var a=n.indexOf(">"),r=n.substr(2,a-2);switch(n=n.substr(a+1),r){case"json":e[o]=parseJSON(n);break;case"int":e[o]=intval(n);break;case"float":e[o]=floatval(n);break;case"bool":e[o]=intval(n)?!0:!1;break;case"null":e[o]=null;break;case"pageview_candidate":e.pop();break;case"debug":ajax._debugLog(n,t),e.pop()}}}},_post:function _post(url,q,o){!q.captcha_sid&&o.showProgress&&o.showProgress();var cacheKey=!1;window.__adsGetAjaxParams&&extend(q,__adsGetAjaxParams(q,o)),o.cache&&(cacheKey=ajax._getCacheKey(url,q,o));var hideBoxes=function(){for(var e=0,t=arguments.length;t>e;++e){var o=arguments[e];o&&o.isVisible()&&(o.setOptions({onHide:!1,onDestroy:!1}),o.hide())}return!1},fail=function(e,t){return o.hideProgress&&o.hideProgress(),o._suggest&&cleanElems(o._suggest),o._suggest=o._captcha=o._box=hideBoxes(o._captcha,o._box),-1!=e.indexOf("The page is temporarily unavailable")&&__dev&&inArray(vk.id,[100])?(ajax._post(url,q,o),!1):void(o.onFail&&o.onFail(e)===!0||topError(e,{dt:5,type:3,status:t.status,url:url,query:q&&ajx2q(q,o.noSort)}))};if(o.local&&(fail=vkLocal(fail)),o.stat){var statAct=!1;stManager.add(o.stat,function(){statAct&&statAct(),o.stat=!1})}var _processResponse=function processResponse(code,answer){if(o.cache){var answ=ajaxCache[cacheKey];answ&&answ._loading&&(setTimeout(function(){for(var e in answ._callbacks)answ._callbacks[e](code,answer)},0),delete ajaxCache[cacheKey])}if(o.stat)return o.stat=!1,statAct=_processResponse.pbind(code,answer),!1;switch(o.cache&&!o.forceGlobalCache&&(code||(ajaxCache[cacheKey]=answer)),o.hideProgress&&o.hideProgress(),2!=code&&(o._captcha&&(o._suggest&&cleanElems(o._suggest),o._suggest=o._captcha=hideBoxes(o._captcha)),o._box=hideBoxes(o._box)),code){case 1:showFastBox({width:520,title:answer[0],onDestroy:o.onFail},answer[1]);break;case 2:var addText="";if(2===intval(answer[1])){var resend=function(e){var t=extend(q,{recaptcha:e}),n=o.cache?extend(o,{cache:-1}):o;ajax._post(url,t,n)};o._captcha=showReCaptchaBox(answer[0],answer[2],o._captcha,{onSubmit:resend,addText:addText,onDestroy:function(){o.onFail&&o.onFail()}})}else{var resend=function(e,t){var n=extend(q,{captcha_sid:e,captcha_key:t}),a=o.cache?extend(o,{cache:-1}):o;ajax._post(url,n,a)};o._captcha=showCaptchaBox(answer[0],intval(answer[1]),o._captcha,{onSubmit:resend,addText:addText,onDestroy:function(){o.onFail&&o.onFail()}})}o._suggest=geByClass1("phone_validation_link",o._captcha.bodyNode),o._suggest&&addEvent(o._suggest,"click",function(){o._box=validateMobileBox({onDone:o._captcha.submit})});break;case 11:case 12:var no=o.cache?extend(o,{cache:-1}):o;o._box=validateMobileBox({acceptCaptcha:11==code,onDone:function(e,t){vk.nophone=0,e&&(o._captcha=curBox()),ajax._post(url,e?extend(q,{captcha_sid:e,captcha_key:t}):q,no)},onFail:o.onFail,hash:answer[0],ahash:answer[1]});break;case 14:var no=o.cache?extend(o,{cache:-1}):o;o._box=photoCaptchaBox({onDone:ajax._post.pbind(url,q,no),onFail:o.onFail});break;case 15:var no=o.cache?extend(o,{cache:-1}):o;o._box=validatePassBox({onDone:ajax._post.pbind(url,q,no),onFail:o.onFail,hash:answer[0]});break;case 3:var no=o.cache?extend(o,{cache:-1}):o;window.onReLoginDone=ajax._post.pbind(url,q,no),window.onReLoginFailed=function(e){-1===e?location.href=location.href.replace(/^http:/,"https:"):e?nav.go("/"):window.onReLoginDone()},utilsNode.appendChild(ce("iframe",{src:vk.loginscheme+"://login.vk.com/?"+ajx2q({role:"al_frame",_origin:locProtocol+"//"+locHost,ip_h:answer[0]||vk.ip_h})}));break;case 4:intval(answer[1])?nav.go(answer[0],!1,{nocur:"2"===answer[1],noback:answer[1]===!0?!0:!1,showProgress:o.showProgress,hideProgress:o.hideProgress}):(hab.stop(),location.href=answer[0]);break;case 5:nav.reload({force:intval(answer[0]),from:1,url:url,query:q&&ajx2q(q)});break;case 6:var no=o.cache?extend(o,{cache:-1}):o;o._box=activateMobileBox({onDone:ajax._post.pbind(url,q,no),onFail:o.onFail,hash:answer[0]});break;case 7:o.onFail&&o.onFail(),topMsg(answer[0],10);break;case 8:if(o.onFail&&o.onFail(answer[0]))return;topError(answer[0]+(answer[2]?" #"+answer[2]:""),{dt:answer[1]?0:10,type:4,url:url,query:q&&ajx2q(q)});break;case 9:if((o.fromBox||o.forceDone)&&(o.onDone&&o.onDone.apply(window,answer),o.fromBox))break;o._box=showFastBox({title:trim(answer[0])},answer[1]);var no=extend(clone(o),{showProgress:o._box.showProgress,hideProgress:o._box.hideProgress});o.cache&&(no.cache=-1),o._box=requestBox(o._box,function(e){isVisible(o._box.progress)||(e||(e={_votes_ok:1}),ajax._post(url,extend(q,e),no))},o.onFail),o._box.evalBox(answer[2]);break;case 10:o._box=showFastBox({title:answer[0]||getLang("global_charged_zone_title"),onHide:o.onFail},answer[1],getLang("global_charged_zone_continue"),function(){var e=extend(q,{charged_confirm:answer[3]});ajax._post(url,e,o)},getLang("global_cancel"));break;case 13:eval("(function(){"+answer[0]+";})()");break;default:if(-1==code||-2==code){var adsShowed=answer.pop(),adsCanShow=answer.pop(),adsHtml=answer.pop();window.__adsSet&&__adsSet(adsHtml,null,adsCanShow,adsShowed)}o.onDone&&o.onDone.apply(window,answer)}window._updateDebug&&_updateDebug(),window.LazyLoad&&LazyLoad.scanDelayed()};o.local&&(_processResponse=vkLocal(_processResponse));var done=function(e,t){o.bench&&(ajax.tDone=(new Date).getTime()),e=e.replace(/^<!--/,"").replace(/-<>-(!?)>/g,"--$1>"),trim(e).length||(t=[8,getLang("global_unknown_error")],e=stVersions.nav+"<!><!>"+vk.lang+"<!>"+stVersions.lang+"<!>8<!>"+t[1]);var n=e.split("<!>"),a=clone(n);each(a,function(e,t){a[e]=t.substr(0,100)}),ajax.lastResp=a.join("<!>");var r=intval(n.shift());if(!r)return fail("<pre>"+e+"</pre>",{status:-1});if(vk.version&&vk.version!=r)return void(r&&n.length>4?nav.reload({force:!0,from:2,url:url,query:q&&ajx2q(q)}):nav.strLoc?location.replace(locBase):topError("Server error.",{type:100}));vk.version=!1;var i=n.shift(),s=intval(n.shift()),l=intval(n.shift());o.frame&&(n=t);var c=intval(n.shift());if(vk.lang!=s&&o.canReload)return void nav.reload({force:!0,from:3,url:url,query:q&&ajx2q(q)});var d=function(){var e=["common.css"];if(i){i=i.split(",");for(var t=0,a=i.length;a>t;++t)e.push(i[t])}if(stVersions.lang<l){stVersions.lang=l;for(var t in StaticFiles)/^lang\d/i.test(t)&&e.push(t)}if(!o.frame)try{ajax._parseRes(n,o._reqid)}catch(r){topError("<b>JSON Error:</b> "+r.message,{type:5,answer:n.join("<!>"),url:url,query:q&&ajx2q(q)})}stManager.add(e,_processResponse.pbind(c,n))};if(window.stVersions){if(r==stVersions.nav)return d();headNode.appendChild(ce("script",{type:"text/javascript",src:"/js/loader_nav"+r+"_"+vk.lang+".js"})),setTimeout(function u(){return r==stVersions.nav?d():void setTimeout(u,100)},0)}};if(o.local&&(done=vkLocal(done)),o.cache>0||o.forceGlobalCache){var answer=ajaxCache[cacheKey];if(answer&&answer._loading)return void answer._callbacks.push(_processResponse);if(answer&&!o.forceGlobalCache)return _processResponse(0,answer),void(3===o.cache&&delete ajaxCache[cacheKey]);if(answer=globalAjaxCache[cacheKey])return-1==answer||isFunction(answer)?globalAjaxCache[cacheKey]=o.onDone:o.onDone.apply(window,answer),void(o.hideProgress&&o.hideProgress())}ajaxCache[cacheKey]={_loading:1,_callbacks:[]},window.debuglogSent?(o._reqid=debuglogSent(url+(q?": "+ajx2q(q,o.noSort).replace(/&/g,"&amp;"):"")),o.frame&&(window._lfrid=o._reqid)):o._reqid=0;var xhrOptions={};return o.timeout&&(xhrOptions.timeout=o.timeout),o.frame?ajax.framepost(url,q,done,o):ajax.plainpost(url,q,done,fail,!1,xhrOptions,o)},tGetParam:function(){if(ajax.tStart&&ajax.tModule){var e=ajax.tDone-ajax.tStart,t=ajax.tProcess-ajax.tDone,o=ajax.tRender-ajax.tProcess,n=ajax.tOver-ajax.tStart,a=[e,t,o,n,ajax.tModule];for(var r in a){if(a[r]<0)return!1;if(!a[r]&&0!==a[r])return!1}return ajax.tStart=!1,a.join(",")}}};window.ajax=ajax,window.ajx2q=ajx2q,window.q2ajx=q2ajx,window.requestBox=requestBox,window.activateMobileBox=activateMobileBox,window.validateMobileBox=validateMobileBox,window.validatePassBox=validatePassBox,window.photoCaptchaBox=photoCaptchaBox},function(e,t){"use strict";function o(){return window.devicePixelRatio>=2}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t.call(e[o],o,e[o])===!1)break;return e}function a(e,t,a){var r=[];n(e,function(e,t){a&&-1==["w","z","y","x","m","s"].indexOf(e)||r.push(t)}),r.sort(function(e,t){return e[1]-t[1]}),t*=o()?2:1;var i=r[r.length-1];return n(r,function(e,o){return o[1]>=t?(i=o,!1):void 0}),i}Object.defineProperty(t,"__esModule",{value:!0}),t.getAppropriateImage=a,t.ParagraphType={Text:1,Header1:2,Header2:3,Header3:4,Code:5,NumericList:6,BulletList:7,Quote:8,Quote2:9,ObjectAudioPlaylist:100,ObjectPhoto:101,ObjectVideo:102,ObjectGIF:103}},function(e,t,o){"use strict";function n(e){return"string"==typeof e||"number"==typeof e?document.getElementById(e):e}function a(e,t){return t=n(t)||document,t.getElementsByTagName(e)}function r(e,t){return t=n(t)||document,t.querySelector&&t.querySelector(e)||a(e,t)[0]}function i(e,t,o){t=n(t)||document,o=o||"*";var r=[];if(t.querySelectorAll&&"*"!=o)return t.querySelectorAll(o+"."+e);if(t.getElementsByClassName){var i=t.getElementsByClassName(e);if("*"!=o){o=o.toUpperCase();for(var s=0,l=i.length;l>s;++s)i[s].tagName.toUpperCase()==o&&r.push(i[s])}else r=Array.prototype.slice.call(i);return r}for(var c=a(o,t),d=new RegExp("(^|\\s)"+e+"(\\s|$)"),s=0,l=c.length;l>s;++s)d.test(c[s].className)&&r.push(c[s]);return r}function s(e,t,o){return t=n(t)||document,o=o||"*",t.querySelector&&t.querySelector(o+"."+e)||i(e,t,o)[0]}function l(e,t,o){if(t=n(t),!t)return null;for(;o!==t&&(t=t.parentNode);)if(ee(t,e))return t;return null}function c(e,t){return(t||document).querySelectorAll(e)}function d(e,t){return(t||document).querySelector(e)}function u(e,t){return ee(t,e)?t:l(e,t)}function f(e,t){return e=e.toUpperCase(),t.nodeType==Node.ELEMENT_NODE&&t.tagName.toUpperCase()==e?t:p(e,t)}function p(e,t){if(t=n(t),!t)return null;for(e=e.toUpperCase();t=t.parentNode;)if(t.tagName&&t.tagName.toUpperCase()==e)return t;return null}function h(e,t,o){var n=document.createElement(e);return t&&extend(n,t),o&&ce(n,o),n}function w(e){return e=n(e),e&&e.parentNode&&e.parentNode.removeChild(e),e}function g(e){return S(h("div",{innerHTML:e}))}function v(e){return T(h("div",{innerHTML:e}))}function _(e,t){return each(t,function(t,o){e=e.replace(new RegExp("%"+t+"%","g"),("undefined"==typeof o?"":o).toString().replace(/\$/g,"&#036;"))}),e}function m(e){return"https:"!=locProtocol?e:(e=e.replace(/http:\/\/(cs(\d+)\.vk\.me\/c(\d+)\/)/gi,"https://$1"),e=e.replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/c(\d+)\/(v\d+\/|[a-z0-9\/_:\-]+\.jpg)/gi,"https://pp.vk.me/c$3/$4"),e=e.replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/([a-z0-9\/_:\-]+\.jpg)/gi,"https://pp.vk.me/c$1/$3"),e=e.replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\//gi,"https://ps.vk.me/c$1/"),e=e.replace(/http:\/\/video(\d+)\.vkadre\.ru\//gi,"https://ps.vk.me/v$1/"))}function y(e,t){return isString(t)&&(t=g(t)),j(e).replaceChild(t,e),t}function b(e,t){for(t=t?"previousSibling":"nextSibling";e&&!e.tagName;)e=e[t];return e}function x(e){return b((e||{}).nextSibling)}function C(e){return b((e||{}).previousSibling,1)}function S(e){return b((e||{}).firstChild)}function k(e){return b((e||{}).lastChild,1)}function j(e){return(e||{}).parentNode}function T(e){for(var t=[],o=e.childNodes,n=0;n<o.length;n++)o[n].tagName&&t.push(o[n]);return t}function B(e,t){var o=j(t);return o&&o.insertBefore(e,t)}function E(e,t){var o=j(t);return o&&o.insertBefore(e,x(t))}function L(e,t){return e?s(t,e):e}function q(e,t,o){return e?"undefined"!=typeof o?(null===o?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,o),o):e.getAttribute("data-"+t):null}function D(e){for(var t=0;null!=(e=C(e));)t++;return t}function N(e,t){do e=j(e);while(e&&!P(e,t));return e}function A(e,t,o){for(var n=null;null===n&&e;)e=-1===o?C(e):x(e),e&&P(e,t)&&(n=e);return n}function P(e,t){if(e=n(e),!e||e==document)return!1;var o=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(e){for(var t=(this.parentNode||this.document||this.ownerDocument).querySelectorAll(e),o=t.length;--o>=0&&t[o]!==this;);return o>-1};return o.call(e,t)}function M(e){return P(e,":hover")}function O(e,t){var o=n(e);if(t=n(t),!e||!t)return!1;for(;o=o.parentNode;)if(o==t)return!0;return!1}function F(){var e=browser.msie6?n("PageContainer"):document.body,t=document.documentElement;return[e.scrollLeft||t.scrollLeft||window.pageXOffset||0,e.scrollTop||t.scrollTop||window.pageYOffset||0,t.clientWidth||e.clientWidth||0,t.clientHeight||e.clientHeight||0]}function R(e,t){t=t||{};for(var o=t.fromEl||j(e),n=t.positions||["relative","absolute","fixed"];o&&o!=bodyNode;){var a=le(o,"position");if(inArray(a,n)&&(!t.noOverflow||"hidden"!=le(o,"overflow")))break;o=j(o)}return o}function H(e,t){e=n(e);for(var o,a,r,i,s=e;s&&s.tagName&&s!==bodyNode&&(o=le(s,"position"),a=le(s,"overflow"),r=le(s,"transform"),!t||!browser.mozilla||"page_wrap"==s.id||s===e||"visible"===a||("static"===o?i&&"relative"!==i:"fixed"===i));)"none"!==r?i=void 0:"static"!==o&&"fixed"!==i&&(i=o),s=j(s);return s}function I(e){var t=arguments.length;if(t>1)for(var o=0;t>o;o++)I(arguments[o]);else if(e=n(e),e&&e.style){var a=e.olddisplay,r="block",i=e.tagName.toLowerCase();e.style.display=a||"","none"===le(e,"display")&&(r=ee(e,"inline")||ee(e,"_inline")?"inline":ee(e,"_inline_block")?"inline-block":"tr"!==i||browser.msie?"table"!==i||browser.msie?"block":"table":"table-row",e.style.display=e.olddisplay=r)}}function z(e){var t=arguments.length;if(t>1)for(var o=0;t>o;o++)z(arguments[o]);else if(e=n(e),e&&e.style){var a=le(e,"display");e.olddisplay="none"!=a?a:"",e.style.display="none"}}function W(e){return e=n(e),e&&e.style?"none"!=le(e,"display"):!1}function V(){return window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight}function U(e,t,o){e=n(e),o=o||0;var a=Y(e)[1],r=Q(e)[1],i=window,s=document.documentElement,l=Math.max(intval(i.innerHeight),intval(s.clientHeight)),c=n("page_header_cont"),d=s.scrollTop||bodyNode.scrollTop||window.scrollY||0,u=vk.staticheader?Math.max(0,Q(c)[1]-d):Q(c)[1];if(t){if(d+u+o>a+r)return a+r-d-u-o;if(a>d+l-o)return a-d-l+o}else{if(d+u+o>a)return a-d-u-o;if(a+r>d+l-o)return a+r-d-l+o}return 0}function X(e,t){return void 0===t&&(t=!W(e)),t?I(e):z(e),t}function $(e){return"undefined"!=typeof e.getBoundingClientRect}function K(e,t){var o;if(t&&"inline"==le(e,"display")){var n=e.getClientRects();o=n&&n[0]||e.getBoundingClientRect()}else o=e.getBoundingClientRect();return o}function Y(e,t){if(e=n(e),!e)return[0,0];var o,a,r={top:0,left:0},i=e.ownerDocument;return i?(o=i.documentElement,$(e)&&(r=K(e,!0)),a=i==i.window?i:9===i.nodeType?i.defaultView||i.parentWindow:!1,[r.left+(t?0:a.pageXOffset||o.scrollLeft)-(o.clientLeft||0),r.top+(t?0:a.pageYOffset||o.scrollTop)-(o.clientTop||0)]):[0,0]}function G(e){return null!=e&&e===e.window}function Q(e,t,o){e=n(e);var a,r=[0,0],i=document.documentElement;if(t&&"border-box"===le(e,"boxSizing")&&(t=!1),e==document)r=[Math.max(i.clientWidth,bodyNode.scrollWidth,i.scrollWidth,bodyNode.offsetWidth,i.offsetWidth),Math.max(i.clientHeight,bodyNode.scrollHeight,i.scrollHeight,bodyNode.offsetHeight,i.offsetHeight)];else if(e){var s=function(){r=$(e)&&(a=K(e,o))&&void 0!==a.width?[a.width,a.height]:[e.offsetWidth,e.offsetHeight],t&&each(r,function(t,o){var n=t?["Top","Bottom"]:["Left","Right"];each(n,function(){r[t]-=parseFloat(le(e,"padding"+this))||0,r[t]-=parseFloat(le(e,"border"+this+"Width"))||0})})};if(W(e))s();else{var l={position:"absolute",visibility:"hidden",display:"block"},c={},d=!1;e.style.cssText.indexOf("!important")>-1&&(d=e.style.cssText),each(l,function(t,o){c[t]=e.style[t],e.style[t]=o}),s(),each(l,function(t,o){e.style[t]=c[t]}),d&&(e.style.cssText=d)}}return r}function J(e){return Q(e)[0]}function Z(e){return Q(e)[1]}function ee(e,t){return e=n(e),e&&1===e.nodeType&&(" "+e.className+" ").replace(window.whitespaceRegex," ").indexOf(" "+t+" ")>=0?!0:!1}function te(e,t){(e=n(e))&&!ee(e,t)&&(e.className=(e.className?e.className+" ":"")+t)}function oe(e,t){return setTimeout(te.pbind(e,t),0)}function ne(e,t){(e=n(e))&&(e.className=trim((e.className||"").replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ")))}function ae(e,t){return setTimeout(ne.pbind(e,t),0)}function re(e,t,o){return void 0===o&&(o=!ee(e,t)),(o?te:ne)(e,t),o}function ie(e,t,o){return void 0===o&&(o=!ee(e,t)),(o?oe:ae)(e,t),o}function se(e,t,o){ne(e,t),te(e,o)}function le(e,t,o){if(e=n(e),isArray(t)){var a={};return each(t,function(t,o){a[o]=le(e,o)}),a}if(!e)return"";if(void 0===o&&(o=!0),!o&&"opacity"==t&&browser.msie){var r=e.style.filter;return r?r.indexOf("opacity=")>=0?parseFloat(r.match(/opacity=([^)]*)/)[1])/100+"":"1":""}if(!o&&e.style&&(e.style[t]||"height"==t))return e.style[t];var i,s=document.defaultView||window;if(s.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var l=s.getComputedStyle(e,null);l&&(i=l.getPropertyValue(t))}else if(e.currentStyle){if("opacity"==t&&browser.msie){var r=e.currentStyle.filter;return r&&r.indexOf("opacity=")>=0?parseFloat(r.match(/opacity=([^)]*)/)[1])/100+"":"1"}var c=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});i=e.currentStyle[t]||e.currentStyle[c],"auto"==i&&(i=0),i=(i+"").split(" "),each(i,function(t,o){if(!/^\d+(px)?$/i.test(o)&&/^\d/.test(o)){var n=e.style,a=n.left,r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,n.left=o||0,i[t]=n.pixelLeft+"px",n.left=a,e.runtimeStyle.left=r}}),i=i.join(" ")}if(o&&("width"==t||"height"==t)){var d=Q(e,!0)[{width:0,height:1}[t]];i=(intval(i)?Math.max(floatval(i),d):d)+"px"}return i}function ce(e,t,o){if(e=n(e)){if("object"==("undefined"==typeof t?"undefined":Se(t)))return each(t,function(t,o){ce(e,t,o)});if("opacity"==t)browser.msie&&((o+"").length?1!==o?e.style.filter="alpha(opacity="+100*o+")":e.style.filter="":e.style.cssText=e.style.cssText.replace(/filter\s*:[^;]*/gi,""),e.style.zoom=1),e.style.opacity!==o&&(e.style.opacity=o);else try{var a="number"==typeof o;a&&/height|width/i.test(t)&&(o=Math.abs(o)),o=a&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t)?o+"px":o,e.style[t]!==o&&(e.style[t]=o)}catch(r){debugLog("setStyle error: ",[t,o],r)}}}function de(e,t,o){setTimeout(ce.pbind(e,t,o),0)}function ue(e,t,o){var a=fe(e,"pseudo-id");a||(fe(e,"pseudo-id",a=irand(1e8,999999999)),te(e,"_pseudo_"+a));var r=t+"-style-"+a,i=n(r),s="._pseudo_"+a+":"+t+"{";i||(i=headNode.appendChild(h("style",{id:r,type:"text/css"}))),each(o,function(e,t){s+=e+": "+t+" !important;"}),s+="}",i.sheet?(i.sheet.cssRules.length&&i.sheet.deleteRule(0),i.sheet.insertRule(s,0)):i.styleSheet&&(i.styleSheet.cssText=s)}function fe(e,t,o){if(!e)return!1;var n,a=e[vkExpand];return a||(a=e[vkExpand]=++vkUUID),o!==n&&(vkCache[a]||(vkCache[a]={},__debugMode&&(vkCache[a].__elem=e)),vkCache[a][t]=o),t?vkCache[a]&&vkCache[a][t]:a}function pe(e,t,o){return e=n(e),"undefined"==typeof o?e.getAttribute(t):(e.setAttribute(t,o),o)}function he(e){for(var t=0,o=arguments.length;o>t;++t){var n=arguments[t];if(void 0!==e[n])try{delete e[n]}catch(a){try{e.removeAttribute(n)}catch(a){}}}}function we(e,t){var o=e?e[vkExpand]:!1;if(o)if(t){if(vkCache[o]){delete vkCache[o][t],t="";var n=0;for(t in vkCache[o])if("__elem"!==t){n++;break}n||we(e)}}else removeEvent(e),he(e,vkExpand),delete vkCache[o]}function ge(){for(var e=arguments,t=0;t<e.length;++t){var o=n(e[t]);o&&(we(o),he(o,"btnevents"))}}function ve(e,t,o){if(e=n(e),e&&!e.titleSet){if(t||(t=e),t.scrollWidth>t.clientWidth)e.setAttribute("title",o||e.innerText||e.textContent);else{var a=r("b",e);a&&a.scrollWidth>a.clientWidth?e.setAttribute("title",o||e.innerText||e.textContent):e.removeAttribute("title")}e.titleSet=1}}function _e(){var e=n("zoom_test_1")||document.body.appendChild(h("div",{id:"zoom_test_1"},{left:"10%",position:"absolute",visibility:"hidden"})),t=n("zoom_test_2")||document.body.appendChild(h("div",{id:"zoom_test_2"},{left:e.offsetLeft+"px",position:"absolute",visibility:"hidden"}));return t.offsetLeft/e.offsetLeft}function me(e,t,o){return(e=n(e))?(void 0!==t&&(e.setValue?(e.setValue(t),!o&&e.phonblur&&e.phonblur()):"INPUT"==e.tagName||"TEXTAREA"==e.tagName?e.value=t:void 0!==e.emojiId&&window.Emoji?Emoji.val(e,t):e.innerHTML=t,!o&&triggerEvent(e,"valueChanged")),e.getValue?e.getValue():("INPUT"==e.tagName||"TEXTAREA"==e.tagName?e.value:e.innerHTML)||""):void 0}function ye(e,t,o){e=n(e);try{if(e.focus(),(void 0===t||t===!1)&&(t=e.value.length),(void 0===o||o===!1)&&(o=t),e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",o),a.moveStart("character",t),a.select()}else e.setSelectionRange&&e.setSelectionRange(t,o)}catch(r){}}function be(e,t,o){for(e=n(e),o=o||999;e&&!t(e);){if(o--,0==o)return!1;try{if(e=j(e),e==document)break}catch(a){e=!1}}return e}function xe(e){return je?void 0:window.document.title=e}function Ce(e){je=e,e&&window.cur&&window.cur.destroy.push(function(){Ce(!1)})}Object.defineProperty(t,"__esModule",{value:!0});var Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.ge=n,t.geByTag=a,t.geByTag1=r,t.geByClass=i,t.geByClass1=s,t.gpeByClass=l,t.domQuery=c,t.domQuery1=d,t.domClosest=u,t.domClosestByTag=f,t.gpeByTag=p,t.ce=h,t.re=w,t.se=g,t.sech=v,t.rs=_,t.psr=m,t.domReplaceEl=y,t.domEL=b,t.domNS=x,t.domPS=C,t.domFC=S,t.domLC=k,t.domPN=j,t.domChildren=T,t.domInsertBefore=B,t.domInsertAfter=E,t.domByClass=L,t.domData=q,t.domChildIndex=D,t.domCA=N,t.domClosestSibling=A,t.matchesSelector=P,t.isHover=M,t.isAncestor=O,t.getScroll=F,t.domClosestPositioned=R,t.domClosestOverflowHidden=H,t.show=I,t.hide=z,t.isVisible=W,t.clientHeight=V,t.getClientRectOffsetY=U,t.toggle=X,t.boundingRectEnabled=$,t.getXYRect=K,t.getXY=Y,t.isWindow=G,t.getSize=Q,t.getW=J,t.getH=Z,t.hasClass=ee,t.addClass=te,t.addClassDelayed=oe,t.removeClass=ne,t.removeClassDelayed=ae,t.toggleClass=re,t.toggleClassDelayed=ie,t.replaceClass=se,t.getStyle=le,t.setStyle=ce,t.setStyleDelayed=de,t.setPseudoStyle=ue,t.data=fe,t.attr=pe,t.removeAttr=he,t.removeData=we,t.cleanElems=ge,t.setTitle=ve,t.getZoom=_e,t.val=me,t.elfocus=ye,t.traverseParent=be,t.setDocumentTitle=xe,t.lockDocumentTitle=Ce;var ke=o(4);window.cf=function(e){var t=e.createDocumentFragment(),o=e.createElement("div"),n=e.createRange&&e.createRange();return t.appendChild(o),n&&n.selectNodeContents(o),n&&n.createContextualFragment?function(t){return t?n.createContextualFragment(t):e.createDocumentFragment()}:function(t){if(!t)return e.createDocumentFragment();o.innerHTML=t;for(var n=e.createDocumentFragment();o.firstChild;)n.appendChild(o.firstChild);return n}}(document),window.whitespaceRegex=/[\t\r\n\f]/g,window.cssTransformProp=function(){var e=document.createElement("div");if(null==e.style.transform){var t=["Webkit","Moz","ms"];for(var o in t)if(void 0!==e.style[t[o]+"Transform"])return t[o]+"Transform"}return"transform"}(),window.vkExpand=window.vkExpand||"VK"+(0,ke.vkNow)(),window.vkUUID=window.vkUUID||0,window.vkCache=window.vkCache||{};var je=!1;window.ge=n,window.geByTag=a,window.geByTag1=r,window.geByClass=i,window.geByClass1=s,window.gpeByClass=l,window.domQuery=c,window.domQuery1=d,window.domClosest=u,window.ce=h,window.re=w,window.se=g,window.sech=v,window.rs=_,window.psr=m,window.domReplaceEl=y,window.domEL=b,window.domNS=x,window.domPS=C,window.domFC=S,window.domLC=k,window.domPN=j,window.domChildren=T,window.domInsertBefore=B,window.domInsertAfter=E,window.domByClass=L,window.domData=q,window.domChildIndex=D,window.domCA=N,window.domClosestSibling=A,window.matchesSelector=P,window.isHover=M,window.isAncestor=O,window.getScroll=F,window.domClosestPositioned=R,window.domClosestOverflowHidden=H,window.show=I,window.hide=z,window.isVisible=W,window.clientHeight=V,window.getClientRectOffsetY=U,window.toggle=X,window.boundingRectEnabled=$,window.getXYRect=K,window.getXY=Y,window.isWindow=G,window.getSize=Q,window.hasClass=ee,window.addClass=te,window.addClassDelayed=oe,window.removeClass=ne,window.removeClassDelayed=ae,window.toggleClass=re,window.toggleClassDelayed=ie,window.replaceClass=se,window.getStyle=le,window.setStyle=ce,window.setStyleDelayed=de,window.setPseudoStyle=ue,window.data=fe,window.attr=pe,window.removeAttr=he,window.removeData=we,window.cleanElems=ge,window.setTitle=ve,window.getZoom=_e,window.val=me,window.elfocus=ye,window.traverseParent=be,window.getH=Z,window.getW=J,window.domClosestByTag=f,window.setDocumentTitle=xe,window.lockDocumentTitle=Ce},function(e,t){"use strict";function o(e){var t=PageID;return function(){t==PageID&&e.apply(this,arguments)}}function n(e,t){return setTimeout(o(e),t)}function a(e,t){return Math.random()*(t-e+1)+e}function r(e,t){return Math.floor(a(e,t))}function i(e){return"undefined"==typeof e}function s(e){return e&&"[object Function]"===Object.prototype.toString.call(e)}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){return"string"==typeof e}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function f(){return+new Date}function p(){return window.Image?new Image:ce("img")}function h(e){return(e||"").replace(/^\s+|\s+$/g,"")}function w(e){return e?e.replace(/<(?:.|\s)*?>/g,""):""}function g(e){return e?e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"):""}function v(e){return e===!0?1:parseInt(e)||0}function _(e){return e===!0?1:parseFloat(e)||0}function m(e){return e=v(e),0>e?0:e}function y(e){return!isNaN(e)}function b(e){return e.replace(/&#(\d\d+);/g,function(e,t){return t=v(t),t>=32?String.fromCharCode(t):e}).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&");
}function x(e){return se("<textarea>"+(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+"</textarea>").value}function C(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}function S(e){return x(e.replace(/\t/g,"\n"))}function k(e,t){if(d(e)||"undefined"==typeof e.length){for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t.call(e[o],o,e[o])===!1)break}else for(var n=0,a=e.length;a>n;n++){var r=e[n];if(t.call(r,n,r)===!1)break}return e}function j(e,t,o){for(var n=o||0,a=(e||[]).length;a>n;n++)if(e[n]==t)return n;return-1}function T(e,t){return-1!=j(t,e)}function B(e,t){var o=d(e)||"undefined"==typeof e.length?{}:[];for(var n in e)(!/webkit/i.test(_ua)||"layerX"!=n&&"layerY"!=n&&"webkitMovementX"!=n&&"webkitMovementY"!=n)&&(t&&"object"===M(e[n])&&"prototype"!==n&&null!==e[n]?o[n]=B(e[n]):o[n]=e[n]);return o}function E(e){var t,o,n={},a=1,r=arguments.length,i=arguments;for(t in e){for(o=!1,a=1;r>a;a++)i[a][t]&&i[a][t]==e[t]&&(o=!0);o||(n[t]=e[t])}return n}function L(){var e,t=arguments,o=t[0]||{},n=1,a=t.length,r=!1;for("boolean"==typeof o&&(r=o,o=t[1]||{},n=2),"object"===("undefined"==typeof o?"undefined":M(o))||s(o)||(o={});a>n;++n)if(null!=(e=t[n]))for(var i in e){var l=o[i],c=e[i];o!==c&&(r&&c&&"object"===("undefined"==typeof c?"undefined":M(c))&&!c.nodeType?o[i]=L(r,l||(null!=c.length?[]:{}),c):void 0!==c&&(o[i]=c))}return o}function q(e){window.templates=window.templates||{},L(window.templates,e)}function D(e,t){var o=window.templates=window.templates||{},n=o[e];return"function"==typeof n&&(n=n()),n&&t?rs(n,t):n||""}function N(e){if("object"!=("undefined"==typeof e?"undefined":M(e)))return!1;var t={},o=function(t){return geByTag(t,e)},n=function(o,n){if(n.name)if("text"!=n.type&&n.type)if(n.getAttribute("bool")){var a=val(n);if(!a||"0"===a)return;t[n.name]=1}else t[n.name]=browser.msie&&!n.value&&e[n.name]?e[n.name].value:n.value;else t[n.name]=val(n)};return k(o("input"),function(e,t){return"radio"!=t.type&&"checkbox"!=t.type||t.checked?n(e,t):void 0}),k(o("select"),n),k(o("textarea"),n),t}function A(e,t){for(var o,n=t?F:O,a=[];e&&(o=e.match(n));){e=e.substr(o.index+o[0].length);var r=0;o[4]||(r=7),a.push({url:o[2+r],query:o[5+r]||"",domain:o[4+r]})}return a}function P(){return window.devicePixelRatio>=2}Object.defineProperty(t,"__esModule",{value:!0});var M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.vkLocal=o,t.lTimeout=n,t.rand=a,t.irand=r,t.isUndefined=i,t.isFunction=s,t.isArray=l,t.isString=c,t.isObject=d,t.isEmpty=u,t.vkNow=f,t.vkImage=p,t.trim=h,t.stripHTML=w,t.escapeRE=g,t.intval=v,t.floatval=_,t.positive=m,t.isNumeric=y,t.winToUtf=b,t.replaceEntities=x,t.clean=C,t.unclean=S,t.each=k,t.indexOf=j,t.inArray=T,t.clone=B,t.arrayKeyDiff=E,t.extend=L,t.addTemplates=q,t.getTemplate=D,t.serializeForm=N,t.extractUrls=A,t.isRetina=P,window.PageID=window.PageID||1;var O=/(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,9}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0]))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0])))/i,F=/(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,9}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$)))/i;window.isRetina=P,window.extractUrls=A,window.serializeForm=N,window.addTemplates=q,window.getTemplate=D,window.rand=a,window.irand=r,window.isUndefined=i,window.isFunction=s,window.isArray=l,window.isString=c,window.isObject=d,window.isEmpty=u,window.vkNow=f,window.vkImage=p,window.trim=h,window.stripHTML=w,window.escapeRE=g,window.intval=v,window.floatval=_,window.positive=m,window.isNumeric=y,window.winToUtf=b,window.replaceEntities=x,window.clean=C,window.unclean=S,window.each=k,window.indexOf=j,window.inArray=T,window.clone=B,window.arrayKeyDiff=E,window.extend=L,window.vkLocal=o,window.lTimeout=n},function(e,t,o){"use strict";o(3),o(8),o(4),o(9);try{stManager.done(jsc("web/article_layer.js"))}catch(n){}},,function(e,t,o){"use strict";function n(e,t){m=t||{},x=e,v=ge("article_view_"+e.owner_id+"_"+e.id),_=m.scrollNode||window,y=m.getScrollTop||function(){var e=document.scrollingElement||window.scrollNode||document.body;return e.scrollTop},g=gpeByClass("article_body",v)||gpeByClass("_article_layer",v),s(),i(),p(),setTimeout(function(){_.click&&_.click(),_.focus()},10),window.onBodyResize=window.onBodyResize||function(){},window.cur&&cur.destroy.push(function(){r()})}function a(){m.notFull=!1,i(),p(),l()}function r(){C&&(_.removeEventListener("scroll",C),C=!1),S&&(_.removeEventListener("scroll",S),S=!1),clearTimeout(k)}function i(){each(geByClass("_article_unmute_button"),function(e,t){t.addEventListener("click",function(){var e=t.parentNode,o=geByTag1("video",e);o.muted=!o.muted,toggleClass(e,"article_object_unmuted",!o.muted)})}),each(geByTag("figure",v),function(e,t){var o=parseInt(domData(t,"type"));m.isWebView||o!=w.ParagraphType.ObjectPhoto||d(t)})}function s(){_.addEventListener("scroll",C=function(){l()},{passive:!0}),l()}function l(){var e={101:-2e3},t=y(),o=window.innerHeight,n=getXY(v)[1];each(geByTag("figure",v),function(a,r){var i=intval(domData(r,"done"));if(!i){var s=getH(r),l=getXY(r)[1]-n,d=intval(domData(r,"type")),u=void 0!==e[d]?e[d]:60,f=t+o-u>=l&&l+s-u>=t;i=c(f,d,r),i&&domData(r,"done",1)}})}function c(e,t,o){var n=!1;switch(t){case w.ParagraphType.ObjectPhoto:if(e){var a=geByTag1("img",o),r=JSON.parse(domData(a,"sizes")),i=(0,w.getAppropriateImage)(r,getW(a),!0),s=h(i,1),l=s[0],c=new Image;c.onload=function(){removeClass(a,"article_object_photo__image_blur"),a.src=l},c.src=l,n=!0}break;case w.ParagraphType.ObjectGIF:if(!m.mobile){var d=geByTag1("video",o);d?e?d.hasAttribute("autoplay")&&d.play():d.pause():n=!0}}return n}function d(e){if(!m.noImageOpen){var t=geByTag1("img",e),o=JSON.parse(domData(t,"sizes")),n=(0,w.getAppropriateImage)(o,window.innerWidth,!0),a=h(n,3),r=a[0],i=a[1],s=a[2],l=f({width:i,height:s},{width:window.innerWidth,height:window.innerHeight}),c=getW(t)<l.width&&getH(t)<l.height;r&&c&&(addClass(t,"article_image_full_viewable"),t.addEventListener("click",function(){addClass(g,"article_no_scroll");var o=geByTag1("figcaption",e),n=!!domData(e,"loaded"),a=se('<div class="article_full_view"><img class="article_full_view__image '+(n?"":"article_full_view__image_blurred")+'" src="'+t.src+'"></div>');o&&o.innerHTML&&a.appendChild(se('<div class="article_full_view__caption"><div class="article_full_view__caption_inner">'+o.innerHTML+"</div></div>"));var i=geByTag1("img",a);setStyle(i,{width:l.width,height:l.height}),v.appendChild(a),a.addEventListener("click",function(e){domClosest("article_full_view__caption_inner",e.target)||u()}),a.addEventListener("mousewheel",u),b=a;var s=new Image;s.onload=function(){i.src=r,removeClass(i,"article_full_view__image_blurred"),domData(e,"loaded",1)},s.src=r}))}}function u(){return b?(re(b),g&&removeClass(g,"article_no_scroll"),b=!1,!0):!1}function f(e,t){var o=e.width/e.height,n=t.width/t.height,a={};return o>n?(a.width=Math.min(t.width,e.width),a.height=e.height*(a.width/e.width)):(a.height=Math.min(t.height,e.height),a.width=a.height*o),a}function p(){function e(){return Math.round((Date.now()-i)/1e3)}function t(t){if(!(s>=t)&&(s=t,c.push(t),clearTimeout(l),l=setTimeout(o,100),3==t&&x.ttr)){var n=x.ttr-e();n>0&&(k=setTimeout(function(){document.hidden||(s=4,c=[s],o())},1e3*n))}}function o(){c.length&&(ajax.post(window.isMVK?"article.php":"al_articles.php",{act:"stats",scroll:c.join(","),spent:e(),hash:x.access_hash,article_owner_id:x.owner_id,article_id:x.id,is_web_view:m.isWebView?1:0,post_id:m.postId,ref:window.cur?window.cur.module:""}),c=[])}if(!m.notFull){var n=getH(v),a=getXY(v)[1]-scrollGetY(),r=window.innerHeight,i=Date.now(),s=-1,l=void 0,c=[];t(0),_.addEventListener("scroll",S=function(){var e=y();e>0&&t(1);for(var o=1;4>o;o++)e+3*r/4>a+n*o/3&&t(o+1);e+r>n-20&&t(4)},{passive:!0})}}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){var o=[],n=!0,a=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(o.push(i.value),!t||o.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{!n&&s["return"]&&s["return"]()}finally{if(a)throw r}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.initArticle=n,t.updateArticle=a,t.deinitArticle=r;var w=o(2),g=void 0,v=void 0,_=void 0,m=void 0,y=void 0,b=void 0,x=void 0,C=void 0,S=void 0,k=void 0;window.initArticle=n,window.deinitArticle=r,window.updateArticle=a,window.articleCloseImageFullSize=u},function(e,t){"use strict";function o(e,t){function o(e){l.readyState&&"loaded"!=l.readyState&&"complete"!=l.readyState||(a(),i&&i())}function n(e){a(),s&&s()}function a(){clearTimeout(c),l.removeEventListener("load",o),l.removeEventListener("readystatechange",o),l.removeEventListener("error",n)}var r=t.timeout,i=t.onLoad,s=t.onError,l=document.createElement("script");l.addEventListener("load",o),l.addEventListener("readystatechange",o),l.addEventListener("error",n),l.src=e,document.head.appendChild(l);var c=void 0;return r&&(c=setTimeout(n,r)),{destroy:function(){a()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadScript=o,window.loadScript=o},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=o(3),r=o(4),i=o(1),s=o(7),l="article_dark_mode",c=115,d={},u={},f=function(){function e(t,o,a){n(this,e),this._els={},this._article=t,this._isStandalone=!!o,this._videoOpened=0,this._postId=a,this.isStandalone()?this._init():e.prepare(t),this.isStandalone()||(window.onbeforeunload=function(){window.scrollTo(0,0)})}return e.prototype.openEditor=function(e){var t=this;return this.isStandalone()?void 0:(this.close(!0),setTimeout(function(){nav.change({z:"article_edit"+t._article.raw_id})}),cancelEvent(e))},e.prototype.isStandalone=function(){return this._isStandalone},e.prototype.setFaded=function(){(0,a.addClass)(this._els.layer,"article_layer__faded")},e.prototype.show=function(e){function t(t,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t,o){var n=this;o&&(boxRefreshCoords(boxLoader),show(boxLoader),show(boxLayerWrap)),e.prepare(this._article,function(e){o&&(hide(boxLoader),hide(boxLayerWrap)),n._article=e.article,t&&t(),n._ownerId=e.article.owner_id,n._id=e.article.id,n._buildLayer(e.html),n._init(),e.article.title&&(n._prevTitle=document.title,setDocumentTitle(replaceEntities(stripHTML(e.article.title))))}),toggleFastChats(!1)}),e.prototype.isShown=function(){return!!this._els.layer},e.prototype.videoOpened=function(){this._videoOpened+=2},e.prototype.back=function(){this.isStandalone()?location.href=this._article.owner_href||"/feed":history.go(-1)},e.prototype.close=function(e){var t=this;if(deinitArticle(),window.onbeforeunload=!1,e)if(this.isStandalone())location.href=this._article.owner_href||"/feed";else{var o=-1;window.cur&&cur.articleSequence&&(o=-cur.articleSequence-this._videoOpened),history.go(o),cur.articleSequence=0}else(0,a.re)(this._els.layer),removeClass(bodyNode,"article_body_layer"),this._prevTitle&&setDocumentTitle(this._prevTitle),this._onScrollHandler.forEach(function(e){t._getScrollNode().removeEventListener("scroll",e)});toggleFastChats(!0)},e.prototype._getScrollNode=function(){return this._els.scrollNode},e.prototype._getScrollTop=function(){return this.isStandalone()?document.scrollingElement.scrollTop:this._els.layer.scrollTop},e.prototype._setScrollTop=function(e){this.isStandalone()?document.scrollingElement.scrollTop=e:this._els.layer.scrollTop=e},e.prototype._buildLayer=function(t){this._els.layer=se(t),document.body.appendChild(this._els.layer),(0,a.addClass)(bodyNode,"article_body_layer"),this._toggleDarkMode(!1,e.getDarkMode()),(0,a.setStyle)(this._els.layer,{opacity:1})},e.prototype._init=function(){var t=this,o=this._els.layer?this._els.layer:(0,a.geByClass1)("_article_layer");this._els.layer=o,this._els.up=(0,a.geByClass1)("article_layer__up",o),this._els.darkBtn=(0,a.geByClass1)("article_layer__dark",o),this._els.closeBtn=(0,a.geByClass1)("article_layer__close",o),this._els.placeHolderCloseBtn=(0,a.geByClass1)("article_layer_placeholder__back_button",o),this._els.content=(0,a.ge)("article_view_"+this._article.raw_id,o),this._els.layerSubscribeBtn=(0,a.geByClass1)("_article_layer__subscribe_btn",o),this._els.statsButton=(0,a.geByClass1)("article_layer__stat_btn",o),this._els.stats=(0,a.geByClass1)("article_stat",o),this._els.darkBtn.addEventListener("click",this._toggleDarkMode.bind(this)),window.vk.id?this._els.closeBtn.addEventListener("click",this.close.bind(this,!0)):(0,a.re)(this._els.closeBtn),this._els.placeHolderCloseBtn&&this._els.placeHolderCloseBtn.addEventListener("click",this.close.bind(this,!0)),this._els.scrollNode=this.isStandalone()?window:o,this._els.layerSubscribeBtn&&this._els.layerSubscribeBtn.addEventListener("click",this._subscribe.bind(this,this._els.layerSubscribeBtn,JSON.parse((0,a.domData)(this._els.layerSubscribeBtn,"data")))),this._onScrollHandler=[];var n=this._onScroll.bind(this);this._onScrollHandler.push(n),this._getScrollNode().addEventListener("scroll",n),this._els.statsButton&&this._els.statsButton.addEventListener("click",function(){(0,a.toggleClass)(t._els.stats,"article_stat_hidden")}),o.addEventListener("mousemove",function(e){(0,a.toggleClass)(o,"article_layer__hover_left",e.target==o&&e.pageX<c),(0,a.toggleClass)(o,"article_layer__hover_right",e.target==o&&e.pageX>window.innerWidth-c)}),o.addEventListener("click",function(){(0,a.hasClass)(o,"article_layer__hover_left")&&((0,a.hasClass)(t._els.up,"article_layer__up--shown")?t._setScrollTop(0):t.back()),(0,a.hasClass)(o,"article_layer__hover_right")&&t.close(!0)}),(0,s.initArticle)(this._article,{scrollNode:this._getScrollNode(),getScrollTop:this._getScrollTop.bind(this),postId:this._postId}),this.isStandalone()&&(window.onpopstate=function(){document.location.reload()}),this.isStandalone()||this._toggleDarkMode(!1,e.getDarkMode()),this._getScrollNode().scrollTop=this._getSavedScroll(),setTimeout(function(){t._initFooter()}),this.moderActionsInit()},e.prototype._initFooter=function(){function e(e){(0,a.toggleClass)(i,"article_layer__footer--hidden",!e)}function t(){var e=(0,a.getXY)(r)[1]-l;return s-20>e}var o=this,n=this._els.content,r=(0,a.geByClass1)("article_layer__footer");if(r){(0,a.setStyle)(r,"width",(0,a.getSize)(n)[0]);var i=r.cloneNode(!0);(0,a.addClass)(i,"article_layer__footer--fixed"),r.parentNode.appendChild(i);var s=window.innerHeight,l=scrollGetY();e(!t()),setTimeout(function(){(0,a.addClass)(i,"article_layer__footer--trans");var n=o._getScrollTop(),r=function(){var a=Math.max(0,o._getScrollTop());e(n>=a?!t():!1),n=a};o._getScrollNode().addEventListener("scroll",r),o._onScrollHandler.push(r)}),(0,a.geByClass)("article_layer__footer_button_share").forEach(function(e){e.addEventListener("click",o._shareArticle.bind(o))}),(0,a.geByClass)("article_layer__footer_button_bookmark").forEach(function(e){e.addEventListener("click",o._faveArticle.bind(o,e))})}},e.prototype._shareArticle=function(){showBox("like.php",{act:"publish_box",object:"article"+this._article.owner_id+"_"+this._article.id+":"+this._article.access_hash},{stat:["page.js","page.css","wide_dd.js","wide_dd.css","sharebox.js"],onFail:function(e){return showDoneBox(e),!0}})},e.prototype._faveArticle=function(){var e=!1;if(each((0,a.geByClass)("article_layer__footer_button_bookmark"),function(t,o){e=(0,a.toggleClass)(o,"activated")}),i.ajax.post("al_articles.php",{act:"fave",url:this._article.url,add:(0,r.intval)(e),hash:this._article.fave_hash}),e){var t=getLang("global_article_added_to_faves").replace("{link}",'<a href="/fave?section=articles">').replace("{/link}","</a>");showDoneBox(t)}},e.prototype._onScroll=function(){var e=this._getScrollTop();(0,a.toggleClass)(this._els.up,"article_layer__up--shown",e>0),this._updateScrollSet()},e.prototype._getSavedScroll=function(){var e=ls.get("articles_scrolls")||{};return e[this._article.raw_id]||0},e.prototype._updateScrollSet=function(){var e=this._getScrollTop(),t=ls.get("articles_scrolls")||{};Object.keys(t).length>100&&(t={}),t[this._article.raw_id]=e,ls.set("articles_scrolls",t)},e.getDarkMode=function(){return!!(0,r.intval)(localStorage.getItem(l))},e.prototype._toggleDarkMode=function(e,t){var o=this,n=(0,a.toggleClass)(this._els.layer,"article_dark",t);this.isStandalone()&&(0,a.toggleClass)(document.body,"article_dark",n),t?(0,a.toggleClass)(this._els.layerSubscribeBtn,"black",n):((0,a.addClass)(this._els.layerSubscribeBtn,"article_layer_btn_transition"),setTimeout(function(){removeClass(o._els.layerSubscribeBtn,"article_layer_btn_transition")},450),toggleClassDelayed(this._els.layerSubscribeBtn,"black",n)),void 0===t&&vk.id&&i.ajax.post("al_articles.php",{act:"set_dark_mode",is_on:(0,r.intval)(n)}),localStorage.setItem(l,(0,r.intval)(n))},e.clearPrepared=function(e){e=e.replace(/^\//,""),delete d[e]},e.prepare=function(e,t){t||(t=function(){});var o=e.url.replace(/^\//,"");return(0,r.isObject)(d[o])?t(d[o]):(d[o]=d[o]||[],d[o].push(t),void(d[o].length>1||i.ajax.post("al_articles.php",{act:"view",url:o,layer:1},{onDone:function(e,t){var n=d[o];d[o]={html:e,article:t},n.forEach(function(e){return e(d[o])})}})))},e.prototype._subscribe=function(e,t){if(!buttonLocked(e)){var o=(0,a.hasClass)(e,"secondary"),n={showProgress:lockButton.pbind(e),hideProgress:unlockButton.pbind(e),onDone:function(){u[t.oid]=!o,(0,a.toggleClass)(e,"secondary"),t.confirm&&o&&hide(e)}};if(t.oid>0)i.ajax.post("al_friends.php",{act:o?"remove":"add",mid:t.oid,hash:t.hash},n);else{var r=i.ajax.post.pbind("al_groups.php",{act:o?"a_leave":"a_enter",gid:-t.oid,hash:t.hash},n);if(t.confirm&&o)var s=showFastBox(t.confirm.title,t.confirm.text,t.confirm.btn,function(){s.hide(),r()},getLang("global_cancel"));else r()}}},e.prototype.moderActionsInit=function(){var e=this,t=this._article.moder_actions_hash,o=(0,a.ge)("article_moder_rev_sel");o&&o.addEventListener("change",function(e){nav.change({rev:e.target.value}),location.reload()});var n=(0,a.ge)("article_moder__rev_restore");n&&n.addEventListener("click",function(){o.value&&i.ajax.post("al_articles.php",{act:"moder_restore_article_rev",hash:t,article_owner_id:e._article.owner_id,article_id:e._article.id,revision:(0,r.intval)(o.value)},{showProgress:lockButton.pbind(n),onDone:function(){nav.change({rev:!1}),location.reload()}})});var s=(0,a.ge)("article_moder__ban_btn");if(s){var l=(0,r.intval)(s.getAttribute("data-banned"))?0:1;s.addEventListener("click",function(){i.ajax.post("al_articles.php",{act:"moder_ban_article",hash:t,article_owner_id:e._article.owner_id,article_id:e._article.id,do_ban:(0,r.intval)(l)},{showProgress:lockButton.pbind(s),onDone:function(){location.reload()}})})}},e}();window.ArticleLayer=f}]);